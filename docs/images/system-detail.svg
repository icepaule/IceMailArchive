<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 780 560" font-family="sans-serif">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#94a3b8"/>
    </marker>
    <marker id="arrowhead-sm" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#94a3b8"/>
    </marker>
  </defs>

  <!-- Dark card background -->
  <rect x="0" y="0" width="780" height="560" rx="16" fill="#1e293b"/>

  <!-- ======== TOP: User box ======== -->
  <rect x="240" y="20" width="300" height="44" rx="8" fill="#2563eb"/>
  <text x="390" y="47" text-anchor="middle" fill="#ffffff" font-size="14" font-weight="600">Benutzer (Browser / PowerShell)</text>

  <!-- Arrow: User -> OpenArchiver -->
  <line x1="390" y1="64" x2="390" y2="108" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="396" y="92" fill="#cbd5e1" font-size="11" text-anchor="start">Port 3000 (HTTP)</text>

  <!-- ======== OpenArchiver container ======== -->
  <rect x="190" y="110" width="400" height="190" rx="10" fill="#065f46" stroke="#059669" stroke-width="2"/>
  <text x="210" y="133" fill="#ffffff" font-size="13" font-weight="700">OpenArchiver</text>

  <!-- Frontend box -->
  <rect x="260" y="144" width="260" height="38" rx="6" fill="#059669"/>
  <text x="390" y="168" text-anchor="middle" fill="#ffffff" font-size="13" font-weight="600">Frontend (SvelteKit)</text>

  <!-- Arrow: Frontend -> Backend -->
  <line x1="390" y1="182" x2="390" y2="218" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrowhead-sm)"/>

  <!-- Backend box -->
  <rect x="240" y="220" width="300" height="38" rx="6" fill="#059669"/>
  <text x="390" y="244" text-anchor="middle" fill="#ffffff" font-size="13" font-weight="600">Backend (Node.js) Port 4000</text>

  <!-- ======== Fan-out arrows from OpenArchiver bottom ======== -->
  <!-- 5 targets at y=390, spread across width -->
  <!-- Target centers: 78, 234, 390, 546, 702 -->

  <!-- Arrow to PostgreSQL -->
  <line x1="340" y1="300" x2="78" y2="380" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Arrow to Valkey -->
  <line x1="360" y1="300" x2="234" y2="380" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Arrow to Meilisearch -->
  <line x1="390" y1="300" x2="390" y2="380" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Arrow to Apache Tika -->
  <line x1="420" y1="300" x2="546" y2="380" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Arrow to IMAP -->
  <line x1="440" y1="300" x2="702" y2="380" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- ======== Bottom service boxes ======== -->

  <!-- PostgreSQL -->
  <rect x="14" y="384" width="128" height="70" rx="8" fill="#d97706"/>
  <text x="78" y="407" text-anchor="middle" fill="#ffffff" font-size="13" font-weight="600">PostgreSQL</text>
  <text x="78" y="424" text-anchor="middle" fill="#fef3c7" font-size="10">Metadata, Accounts</text>
  <text x="78" y="440" text-anchor="middle" fill="#fef3c7" font-size="10">:5432</text>

  <!-- Valkey (Redis) -->
  <rect x="170" y="384" width="128" height="70" rx="8" fill="#d97706"/>
  <text x="234" y="407" text-anchor="middle" fill="#ffffff" font-size="13" font-weight="600">Valkey (Redis)</text>
  <text x="234" y="424" text-anchor="middle" fill="#fef3c7" font-size="10">Job-Queue, Cache</text>
  <text x="234" y="440" text-anchor="middle" fill="#fef3c7" font-size="10">:6379</text>

  <!-- Meilisearch -->
  <rect x="326" y="384" width="128" height="70" rx="8" fill="#d97706"/>
  <text x="390" y="407" text-anchor="middle" fill="#ffffff" font-size="13" font-weight="600">Meilisearch</text>
  <text x="390" y="424" text-anchor="middle" fill="#fef3c7" font-size="10">Volltext Suche</text>
  <text x="390" y="440" text-anchor="middle" fill="#fef3c7" font-size="10">:7700</text>

  <!-- Apache Tika -->
  <rect x="482" y="384" width="128" height="70" rx="8" fill="#d97706"/>
  <text x="546" y="407" text-anchor="middle" fill="#ffffff" font-size="13" font-weight="600">Apache Tika</text>
  <text x="546" y="424" text-anchor="middle" fill="#fef3c7" font-size="10">Text-Extrakt.</text>
  <text x="546" y="440" text-anchor="middle" fill="#fef3c7" font-size="10">:9998</text>

  <!-- IMAP-Server -->
  <rect x="638" y="384" width="128" height="70" rx="8" fill="#2563eb"/>
  <text x="702" y="403" text-anchor="middle" fill="#ffffff" font-size="12" font-weight="600">IMAP-Server</text>
  <text x="702" y="419" text-anchor="middle" fill="#ffffff" font-size="11">(extern)</text>
  <text x="702" y="440" text-anchor="middle" fill="#cbd5e1" font-size="10">:993/143</text>

  <!-- ======== Bottom labels on IMAP arrow ======== -->
  <text x="600" y="348" fill="#cbd5e1" font-size="11" text-anchor="middle">IMAP</text>

</svg>